(this["webpackJsonpsibdev-task"]=this["webpackJsonpsibdev-task"]||[]).push([[0],{43:function(e,t,c){},44:function(e,t,c){},46:function(e,t,c){},47:function(e,t,c){},48:function(e,t,c){},68:function(e,t,c){},69:function(e,t,c){},74:function(e,t,c){},75:function(e,t,c){},76:function(e,t,c){},77:function(e,t,c){},78:function(e,t,c){},79:function(e,t,c){},80:function(e,t,c){},81:function(e,t,c){},82:function(e,t,c){},83:function(e,t,c){},84:function(e,t,c){},85:function(e,t,c){},86:function(e,t,c){},87:function(e,t,c){},88:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),r=c(35),s=c.n(r),i=(c(43),c(11)),l=c(4),o=c(3),u=c(2),d=c(6),j=function(e){return e.filter((function(e){return!!e}))},b=function(){for(var e=arguments.length,t=new Array(e),c=0;c<e;c++)t[c]=arguments[c];return j(t).join(" ")},m=function e(t){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(var a in t){var r=c?Array.isArray(t)?"".concat(c,"[").concat(a,"]"):"".concat(c,".").concat(a):a;"object"===typeof t[a]?e(t[a],r,n):n[r]=t[a]}return n},h=function(e){return new Promise((function(t){return setTimeout(t,e)}))},O=function(e){return JSON.parse(JSON.stringify(e))},f=(c(44),c(0)),v=function(e){var t=e.type,c=void 0===t?"primary":t,n=e.htmlType,a=e.className,r=Object(d.a)(e,["type","htmlType","className"]);return Object(f.jsx)("button",Object(u.a)({type:n,className:b("button",a,"primary"===c&&"button_primary","secondary"===c&&"button_secondary")},r))},x=Object(n.createContext)({}),p=function(){return Object(n.useContext)(x)},g=function(e){var t=e.children,c=Object(d.a)(e,["children"]);return Object(f.jsx)(x.Provider,{value:c,children:t})},_=c(20),N=c.n(_);function k(e){return Object.values(m(e)).every((function(e){return""===e}))}var y=function(e){var t=e.initialValues,c=e.initialErrors,a=void 0===c?{}:c,r=e.initialTouched,s=void 0===r?{}:r,i=e.validate,l=Object(n.useState)(t),d=Object(o.a)(l,2),j=d[0],b=d[1],m=Object(n.useState)(a),h=Object(o.a)(m,2),f=h[0],v=h[1],x=Object(n.useState)(s),p=Object(o.a)(x,2),g=p[0],_=p[1],y=function(e,t){b((function(c){return N()(O(c),e,t)}))},w=function(e,t){return _((function(c){return N()(O(c),e,t)}))};return{touched:g,values:j,errors:f,helpers:{changeHandler:function(e,t){switch(w(e,!0),typeof t){case"boolean":case"string":case"number":y(e,t);break;default:y(e,t.target.value)}},isFormValid:function(){if(i){var e=i(j);return v((function(t){return Object(u.a)(Object(u.a)({},t),e)})),k(e)}return k(f)},setValue:y,setError:function(e,t){return v((function(c){return N()(O(c),e,t)}))},touchField:w}}},w=c(14),C=c(10),S=c.n(C),I=function(e,t){var c="";(t.min&&e.length<t.min&&(c="\u041c\u0438\u043d\u0438\u043c\u0443\u043c ".concat(t.min," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")),t.max&&e.length>t.max&&(c="\u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c ".concat(t.max," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")),t.pattern)&&(P(e,new RegExp(t.pattern))||(c="\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043d\u0435 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0448\u0430\u0431\u043b\u043e\u043d\u0443 \u0432\u0432\u043e\u0434\u0430"));return c},E=function(e,t){var c="";return isNaN(e)&&(c="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0447\u0438\u0441\u043b\u043e"),t.min&&e<t.min&&(c="\u041c\u0438\u043d\u0438\u043c\u0443\u043c ".concat(t.min)),t.max&&e>t.max&&(c="\u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c ".concat(t.max)),c},L=function(e){return P(e,/(\+7|8)\s\(\d{3}\)\s\d{3}-\d{2}-\d{2}/)?"":"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u043b\u0438\u0434\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430"};function P(e,t){var c,n=null!==(c=e.match(t))&&void 0!==c?c:[];return Object(o.a)(n,1)[0]===e}var q=function(e){var t,c=e.name,a=e.schema,r=e.label,s=e.children,i=e.className,l=e.trigger,o=void 0===l?"onChange":l,d=e.valuePropName,j=void 0===d?"value":d,m=e.invalidPropName,h=void 0===m?"isInvalid":m,O=p(),v=O.values,x=O.errors,g=O.touched,_=O.helpers,N=S()(v,c),k=S()(x,c),y=S()(g,c);Object(n.useEffect)((function(){a&&_.setError(c,function(e,t){var c,n,a,r,s,i,l="undefined"===typeof t||""===t||!1===t;if(e.required&&l)return"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u0435";if(!e.required&&l)return"";var o="";switch(e.type){case"string":o=I(null!==(c=t)&&void 0!==c?c:"",e),o=(null===(n=e.validate)||void 0===n?void 0:n.call(e,t))||o;break;case"number":o=E(t,e),o=(null===(a=e.validate)||void 0===a?void 0:a.call(e,t))||o;break;case"phone":o=L(null!==(r=t)&&void 0!==r?r:""),o=(null===(s=e.validate)||void 0===s?void 0:s.call(e,t))||o;break;case"select":o=(null===(i=e.validate)||void 0===i?void 0:i.call(e,t))||o}return o}(a,N))}),[N]);var C=k&&y,P=Object(n.cloneElement)(s,Object(u.a)(Object(u.a)({},s.props),{},(t={},Object(w.a)(t,j,N),Object(w.a)(t,h,C),Object(w.a)(t,o,_.changeHandler.bind(null,c)),t)));return Object(f.jsxs)("div",{className:b("form-item",i),children:[Object(f.jsx)("label",{className:b("form-item__label",C&&"form-item__label_error",r&&(null===a||void 0===a?void 0:a.required)&&"form-item__label_required"),children:r}),P,C&&Object(f.jsx)("div",{className:"form-item__error",children:k})]})},F=c(13),V=function(e){var t=e.name,c=e.children,n=p(),a=n.values,r=n.helpers,s=S()(a,t);return c({items:s,remove:function(e){var c=Object(F.a)(s);c.splice(e,1),r.setError(t,""),r.setValue(t,c),r.touchField(t,!1)},push:function(e){r.setValue(t,[].concat(Object(F.a)(s),[e]))}})},T=(c(46),function(e){var t=e.initialErrors,c=void 0===t?{}:t,a=e.initialValues,r=e.className,s=e.children,i=e.validate,l=e.onSubmit,o=e.onFail,d=e.onValuesChange,j=y({initialValues:a,initialErrors:c,validate:i}),h=j.values,O=j.errors,v=j.helpers;Object(n.useEffect)((function(){null===d||void 0===d||d(h)}),[h]);return Object(f.jsx)("form",{className:b("form",r),onSubmit:function(e){e.preventDefault(),Object.keys(m(h)).forEach((function(e){return v.touchField(e,!0)})),v.isFormValid()?null===l||void 0===l||l(h):null===o||void 0===o||o(O)},children:Object(f.jsx)(g,Object(u.a)(Object(u.a)({},j),{},{children:s(j)}))})});T.Item=q,T.List=V;var A=T,J=(c(47),Object(n.forwardRef)((function(e,t){var c=e.className,n=e.isInvalid,a=Object(d.a)(e,["className","isInvalid"]);return Object(f.jsx)("input",Object(u.a)(Object(u.a)({},a),{},{ref:t,className:b("input",c,n&&"input_error")}))}))),R=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(n.useState)(e),c=Object(o.a)(t,2),a=c[0],r=c[1],s=function(){return r(!0)},i=function(){return r(!1)},l=function(){return r((function(e){return!e}))},u={on:s,off:i,toggle:l};return[a,u]},H=c.p+"static/media/eye.9debb862.svg",B=c.p+"static/media/eye-off.b633b772.svg",D=(c(48),function(e){var t=R(!0),c=Object(o.a)(t,2),n=c[0],a=c[1];return Object(f.jsxs)("div",{className:"password-input",children:[Object(f.jsx)(J,Object(u.a)({type:n?"password":"text"},e)),Object(f.jsx)("img",{className:"password-input__eye",src:n?B:H,alt:n?"Show password":"Hide password",onClick:a.toggle})]})}),z=function(e){var t=e.controls,c=Object(d.a)(e,["controls"]);return Object(f.jsx)(A,Object(u.a)(Object(u.a)({},c),{},{children:function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(A.Item,{label:"\u041b\u043e\u0433\u0438\u043d",name:"username",children:Object(f.jsx)(J,{placeholder:"admin"})}),Object(f.jsx)(A.Item,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",children:Object(f.jsx)(D,{placeholder:"****"})}),t]})}}))},M="token",U=function(){var e;return null!==(e=localStorage.getItem(M))&&void 0!==e?e:""},G=function(){var e=Object(n.useState)(U()),t=Object(o.a)(e,2),c=t[0],a=t[1];return[c,function(e){a(e),function(e){localStorage.setItem(M,e)}(e)}]},K=Object(n.createContext)({}),Q=function(){return Object(n.useContext)(K)},W=function(e){var t=e.children,c=G(),n=Object(o.a)(c,2),a=n[0],r=n[1];return Object(f.jsx)(K.Provider,{value:{token:a,setToken:r},children:t})},X=c(5),Y=c.n(X),Z=c(12),$=c(36),ee=c.n($).a.create({baseURL:"http://193.124.206.217:3000"}),te=function(){var e=Object(Z.a)(Y.a.mark((function e(t){var c,n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=U(),t=Object(u.a)(Object(u.a)({},t),{},{headers:Object(u.a)(Object(u.a)({},t.headers),{},{Authorization:"Bearer ".concat(c)})}),e.next=5,ee(t);case 5:return n=e.sent,e.abrupt("return",n.data);case 9:throw e.prev=9,e.t0=e.catch(0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),ce={response:null,error:null,isLoading:!1},ne=function(e){var t=e.axiosRequestConfig,c=e.onError,a=e.onSuccess,r=Object(n.useState)(ce),s=Object(o.a)(r,2),i=s[0],l=s[1];return[i,function(){var e=Object(Z.a)(Y.a.mark((function e(n){var r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l((function(e){return Object(u.a)(Object(u.a)({},e),{},{isLoading:!0})})),e.prev=1,e.next=4,te(t(n));case 4:r=e.sent,l({response:r,isLoading:!1,error:null}),"function"===typeof a&&a(n),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),l({response:null,isLoading:!1,error:e.t0}),"function"===typeof c&&c(n,e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()]},ae=function(){return ne({axiosRequestConfig:function(e){return{url:"/auth/login",method:"POST",data:e}}})},re=c.p+"static/media/check.c6233f6a.svg",se=c.p+"static/media/cross.dd287d17.svg",ie=(c(68),function(e){var t=e.type,c=e.className,n=e.children;return Object(f.jsxs)("div",{className:b("alert",c,"alert_".concat(t)),children:[Object(f.jsx)("div",{className:b("alert__icon","alert__icon_".concat(t)),children:Object(f.jsx)("img",{src:"success"===t?re:se,alt:"success"===t?"check":"cross"})}),Object(f.jsx)("div",{className:"alert__content",children:n})]})}),le=c.p+"static/media/logo.07abb1c1.svg";c(69);var oe=function(){var e=Object(l.g)(),t=Q(),c=t.token,a=t.setToken,r=ae(),s=Object(o.a)(r,2),i=s[0],u=s[1];return Object(n.useEffect)((function(){i.response&&a(i.response.access_token)}),[i]),Object(n.useEffect)((function(){c&&e.push("/schemas")}),[c]),Object(f.jsx)("div",{className:"login-container",children:Object(f.jsxs)("div",{className:"login",children:[Object(f.jsx)("img",{src:le,alt:"logo",className:"login__logo"}),Object(f.jsx)("h3",{className:"heading-3 login__title",children:"\u0412\u0445\u043e\u0434"}),Object(f.jsx)(z,{className:"login-form",initialValues:{username:"",password:""},onSubmit:u,controls:Object(f.jsx)("div",{className:"login-form__controls",children:Object(f.jsx)(v,{htmlType:"submit",disabled:i.isLoading,children:i.isLoading?"\u0412\u0445\u043e\u0434\u0438\u043c...":"\u0412\u043e\u0439\u0442\u0438"})})}),i.error&&Object(f.jsx)(ie,{className:"login__error",type:"error",children:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0432\u043e\u0439\u0442\u0438"})]})})};c(74);function ue(e){var t=e.to,c=e.children,n=Object(l.h)().pathname===t;return Object(f.jsx)(i.b,{to:t,className:b("navbar__link",n&&"navbar__link_active"),children:c})}var de=function(){var e=Q().setToken;return Object(f.jsx)("div",{className:"navbar-container",children:Object(f.jsx)("div",{className:"navbar",children:Object(f.jsxs)("div",{className:"navbar-links",children:[Object(f.jsxs)("div",{className:"navbar-links__group",children:[Object(f.jsx)("img",{src:le,alt:"logo",className:"navbar__logo"}),Object(f.jsx)(ue,{to:"/schemas",children:"\u041c\u043e\u0438 \u0441\u0445\u0435\u043c\u044b"}),Object(f.jsx)(ue,{to:"/schemas/new",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u0445\u0435\u043c\u0443"})]}),Object(f.jsx)("div",{className:"navbar-links__group",children:Object(f.jsx)("span",{className:"navbar__link",onClick:function(){return e("")},children:"\u0412\u044b\u0439\u0442\u0438"})})]})})})},je=(c(75),function(e){var t=e.className,c=e.schemas;return Object(f.jsx)("div",{className:b("schemas-list",t),children:c.map((function(e){return Object(f.jsx)("div",{className:"schemas-list__item",children:Object(f.jsx)(i.b,{to:"/schemas/".concat(e.id),children:e.name})},e.id)}))})}),be=function(){var e,t=null!==(e=localStorage.getItem("schemas"))&&void 0!==e?e:"[]";return JSON.parse(t)},me=function(e){var t=be(),c=[].concat(Object(F.a)(t),[e]);localStorage.setItem("schemas",JSON.stringify(c))},he={response:null,error:null,isLoading:!1},Oe=function(){var e=Object(n.useState)(he),t=Object(o.a)(e,2),c=t[0],a=t[1];return[c,function(){var e=Object(Z.a)(Y.a.mark((function e(){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a((function(e){return Object(u.a)(Object(u.a)({},e),{},{isLoading:!0})})),e.next=3,h(500);case 3:t=be(),a((function(e){return Object(u.a)(Object(u.a)({},e),{},{response:t,isLoading:!1})}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()]};c(76);var fe=function(){var e,t=Oe(),c=Object(o.a)(t,2),a=c[0],r=c[1];Object(n.useEffect)((function(){r()}),[]);var s=null!==(e=a.response)&&void 0!==e?e:[];return Object(f.jsxs)("div",{className:"schemas-page",children:[Object(f.jsx)(de,{}),Object(f.jsxs)("div",{className:"content",children:[Object(f.jsx)("h2",{className:"heading-2",children:"\u041c\u043e\u0438 \u0441\u0445\u0435\u043c\u044b"}),a.isLoading?Object(f.jsx)("p",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}):Object(f.jsx)(je,{schemas:s,className:"schemas-page__schemas-list"}),Object(f.jsx)(i.b,{to:"schemas/new",children:Object(f.jsx)(v,{children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u0445\u0435\u043c\u0443"})})]})]})},ve=c.p+"static/media/arrow.ce7aa419.svg",xe=(c(77),function(e){var t=e.className,c=e.defaultOpened,r=void 0===c?[]:c,s=e.children,i=Object(n.useState)(r),l=Object(o.a)(i,2),d=l[0],j=l[1];return Object(f.jsx)("div",{className:b("accordion",t),children:s.map((function(e){var t=e.props.id,c=d.includes(t);return Object(f.jsx)("div",{children:a.a.cloneElement(e,Object(u.a)(Object(u.a)({},e.props),{},{isOpened:c,onClick:function(){return c?function(e){return j((function(t){return t.filter((function(t){return t!==e}))}))}(t):function(e){return j((function(t){return[].concat(Object(F.a)(t),[e])}))}(t)}}))},t)}))})});xe.Item=function(e){var t=e.isOpened,c=e.title,n=e.extra,a=e.className,r=e.children,s=e.onClick;return Object(f.jsxs)("div",{className:b("accordion-item",a,t&&"accordion-item_opened"),children:[Object(f.jsxs)("div",{className:"accordion-item__header",onClick:s,children:[Object(f.jsxs)("div",{className:"accordion-item-title",children:[Object(f.jsx)("img",{src:ve,alt:"arrow",className:b("accordion-item-title__arrow",t&&"accordion-item-title__arrow_opened")}),"function"===typeof c?c(!!t):c]}),Object(f.jsx)("div",{className:"accordion-item__extra",children:n})]}),Object(f.jsx)("div",{className:b("accordion-item__body",t&&"accordion-item__body_opened"),children:r})]})};var pe=xe,ge=function(e,t){Object(n.useEffect)((function(){var c=function(c){e.current&&!e.current.contains(c.target)&&t(c)};return document.addEventListener("click",c),function(){document.removeEventListener("click",c)}}),[e,t])};c(78);function _e(e){var t=e.label,c=e.value,n=e.isSelected,a=e.onClick;return Object(f.jsx)("div",{onClick:a,className:b("select__option",n&&"select__option_active"),children:t},c)}var Ne=function(e){var t=e.options,c=e.selected,a=e.placeholder,r=e.isInvalid,s=e.onSelect,i=Object(n.useRef)(null),l=R(),d=Object(o.a)(l,2),j=d[0],m=d[1];ge(i,m.off);var h=t.find((function(e){return e.value===c}));return Object(f.jsxs)("div",{ref:i,className:"select",children:[Object(f.jsxs)("div",{className:b("select__header",r&&"select__header_error",j&&"select__header_opened"),onClick:m.toggle,children:[h?Object(f.jsx)("div",{className:"select__value",children:h.label}):Object(f.jsx)("div",{className:b("select__placeholder",r&&"select__placeholder_error"),children:a}),Object(f.jsx)("img",{src:ve,alt:"arrow"})]}),j&&Object(f.jsx)("div",{className:b("select__body",r&&"select__body_error"),children:t.map((function(e){var t=e.value===c;return Object(n.createElement)(_e,Object(u.a)(Object(u.a)({},e),{},{key:e.value,isSelected:t,onClick:function(){null===s||void 0===s||s(t?"":e.value),m.off()}}))}))})]})},ke=function(e){switch(e){case"string":return"\u0422\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u0435 \u043f\u043e\u043b\u0435";case"number":return"\u0427\u0438\u0441\u043b\u043e\u0432\u043e\u0435 \u043f\u043e\u043b\u0435";case"password":return"\u041f\u0430\u0440\u043e\u043b\u044c";case"checkbox":return"\u0427\u0435\u043a\u0431\u043e\u043a\u0441";case"phone":return"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430";case"select":return"\u0412\u044b\u043f\u0430\u0434\u0430\u044e\u0449\u0438\u0439 \u0441\u043f\u0438\u0441\u043e\u043a";default:return e}},ye=["string","number","password","checkbox","phone","select"],we=function(e){return Object(f.jsx)(Ne,Object(u.a)(Object(u.a)({},e),{},{options:ye.map((function(e){return{label:ke(e),value:e}}))}))},Ce=(c(79),function(e){var t=e.basePath,c=p(),a=c.errors,r=c.helpers,s=S()(a,"".concat(t,".options")),i=!!Array.isArray(s)&&s.some((function(e){return e.key||e.value}));return Object(n.useEffect)((function(){return function(){r.setError("".concat(t,".options"),"")}}),[]),Object(f.jsx)(V,{name:"".concat(t,".options"),children:function(e){var c=e.items,n=e.push,a=e.remove,r=c.length>1;return Object(f.jsxs)("div",{className:"options-list",children:[c.map((function(e,n){var s=function(e,t){return!!c.find((function(c,a){return n!==a&&c[e].toLowerCase()===t.toLowerCase()}))};return Object(f.jsxs)("div",{className:"options-list-item",children:[Object(f.jsx)(q,{name:"".concat(t,".options[").concat(n,"].key"),schema:{type:"string",required:!0,validate:function(e){return s("key",e)?"\u0422\u0430\u043a\u043e\u0439 \u043a\u043b\u044e\u0447 \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442":""}},children:Object(f.jsx)(J,{placeholder:"\u041a\u043b\u044e\u0447"})}),Object(f.jsx)(q,{name:"".concat(t,".options[").concat(n,"].value"),schema:{type:"string",required:!0,validate:function(e){return s("value",e)?"\u0422\u0430\u043a\u043e\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442":""}},children:Object(f.jsx)(J,{placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"})}),r&&Object(f.jsx)("img",{src:se,alt:"cross",className:"options-list-item__cross",onClick:function(){return a(n)}})]},n)})),Object(f.jsx)(v,{htmlType:"button",type:"secondary",className:"options-list__button",disabled:i,onClick:function(){return n({key:"",value:""})},children:"\u041d\u043e\u0432\u044b\u0439 \u0432\u0430\u0440\u0438\u0430\u043d\u0442"})]})}})}),Se=function(e){var t=e.basePath,c="select"===e.type;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(A.Item,{name:"".concat(t,".key"),label:"\u041a\u043b\u044e\u0447 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430",schema:{type:"string",required:!0},children:Object(f.jsx)(J,{placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043a\u043b\u044e\u0447 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430"})}),Object(f.jsx)(A.Item,{name:"".concat(t,".label"),label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430",schema:{type:"string",required:!0},children:Object(f.jsx)(J,{placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430"})}),Object(f.jsx)(A.Item,{name:"".concat(t,".type"),label:"\u041f\u043e\u043b\u0435 \u0434\u043b\u044f \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f",schema:{type:"select",required:!0},valuePropName:"selected",trigger:"onSelect",children:Object(f.jsx)(we,{placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b\u0435 \u0434\u043b\u044f \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f"})}),c&&Object(f.jsx)(Ce,{basePath:t})]})},Ie=function(e){var t=e.onChange,c=Object(d.a)(e,["onChange"]);return Object(f.jsx)(J,Object(u.a)({type:"number",onChange:function(e){return null===t||void 0===t?void 0:t(+e.currentTarget.value)}},c))},Ee=(c(80),c(81),function(e){var t=e.className,c=e.disabled,n=Object(d.a)(e,["className","disabled"]);return Object(f.jsx)("label",Object(u.a)({className:b("inline-label",c&&"inline-label_disabled",t)},n))}),Le=function(e){var t=e.label,c=e.checked,n=e.disabled,a=e.onCheck;return Object(f.jsxs)("div",{className:"switch-container",children:[Object(f.jsx)("button",{type:"button",disabled:n,onClick:function(){return null===a||void 0===a?void 0:a(!c)},className:b("switch",c&&"switch_checked",c&&n&&"switch_disabled-checked",!c&&n&&"switch_disabled"),children:Object(f.jsx)("div",{className:b("switch__indicator",c&&"switch__indicator_checked")})}),Object(f.jsx)(Ee,{disabled:n,children:t})]})},Pe=function(e){var t=e.basePath;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(A.Item,{name:"".concat(t,".required"),valuePropName:"checked",trigger:"onCheck",children:Object(f.jsx)(Le,{label:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"})}),Object(f.jsx)(A.Item,{name:"".concat(t,".min"),label:"\u041c\u0438\u043d. \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435",children:Object(f.jsx)(Ie,{})}),Object(f.jsx)(A.Item,{name:"".concat(t,".max"),label:"\u041c\u0430\u043a\u0441. \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435",children:Object(f.jsx)(Ie,{})})]})},qe=function(e){var t=e.basePath;return Object(f.jsx)(A.Item,{name:"".concat(t,".required"),valuePropName:"checked",trigger:"onCheck",children:Object(f.jsx)(Le,{label:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"})})},Fe=function(e){var t=e.basePath;return Object(f.jsx)(A.Item,{name:"".concat(t,".required"),valuePropName:"checked",trigger:"onCheck",children:Object(f.jsx)(Le,{label:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"})})},Ve=(c(82),function(e){var t=e.basePath;return Object(f.jsxs)("div",{className:"string-validation-form",children:[Object(f.jsx)(A.Item,{name:"".concat(t,".required"),valuePropName:"checked",trigger:"onCheck",children:Object(f.jsx)(Le,{label:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"})}),Object(f.jsxs)("div",{className:"string-validation-form__min-max",children:[Object(f.jsx)(A.Item,{name:"".concat(t,".min"),label:"\u041c\u0438\u043d. \u043a\u043e\u043b-\u0432\u043e \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432",children:Object(f.jsx)(Ie,{})}),Object(f.jsx)(A.Item,{name:"".concat(t,".max"),label:"\u041c\u0430\u043a\u0441. \u043a\u043e\u043b-\u0432\u043e \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432",children:Object(f.jsx)(Ie,{})})]}),Object(f.jsx)(A.Item,{name:"".concat(t,".pattern"),label:"\u0428\u0430\u0431\u043b\u043e\u043d \u0432\u0432\u043e\u0434\u0430",children:Object(f.jsx)(J,{})})]})}),Te=function(e){var t=e.basePath;return Object(f.jsx)(A.Item,{name:"".concat(t,".required"),valuePropName:"checked",trigger:"onCheck",children:Object(f.jsx)(Le,{label:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"})})},Ae=(c(83),function(e){var t=e.basePath,c=p().values,n=S()(c,"".concat(t,".type")),a=function(e){switch(e){case"string":case"password":return Ve;case"number":return Pe;case"phone":return qe;case"checkbox":return Te;case"select":return Fe;default:return function(){return null}}}(n);return Object(f.jsxs)("div",{className:"schema-field",children:[Object(f.jsx)("div",{className:"schema-field__required",children:Object(f.jsx)(Se,{basePath:t,type:n})}),Object(f.jsx)("div",{className:"schema-field__validation",children:Object(f.jsx)(a,{basePath:"".concat(t,".validation")})})]})}),Je=c.p+"static/media/delete.53330300.svg";c(84);function Re(e){var t=e.index,c=e.field,n=e.isOpened,a=e.isInvalid;return Object(f.jsxs)("div",{className:"field-header",children:[Object(f.jsxs)("div",{className:b("field-header__main",a&&!n&&"field-header__main_invalid"),children:["\u0421\u0432\u043e\u0439\u0441\u0442\u0432\u043e ",t,": ",c.label,c.type&&!n&&Object(f.jsxs)("p",{className:"fields-list-item__subtitle",children:[ke(c.type),"; ",c.key]})]}),Object(f.jsx)("div",{className:"fields-header__validation",children:n&&"\u0412\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f"})]})}var He=function(e){var t=e.className,c=e.fields,n=e.removeField,a=p(),r=a.errors,s=a.touched,i=c.length>1;return Object(f.jsx)(pe,{className:t,children:c.map((function(e,t){var c,a,l=null!==(c=null===(a=r.fields)||void 0===a?void 0:a[t])&&void 0!==c?c:{},u=Object.entries(m(l)).some((function(e){var c=Object(o.a)(e,2),n=c[0],a=c[1],r=S()(s,"fields[".concat(t,"].").concat(n));return a&&r}));return Object(f.jsx)(pe.Item,{id:t.toString(),className:"fields-list-item",title:function(c){return Object(f.jsx)(Re,{field:e,index:t+1,isOpened:c,isInvalid:u})},extra:i&&Object(f.jsx)("img",{src:Je,alt:"delete",onClick:function(){return n(t)},className:"fields-list-item__remove"}),children:Object(f.jsx)(Ae,{basePath:"fields[".concat(t,"]")})},t)}))})},Be=(c(85),{key:"",label:"",type:"string",validation:{},options:[{key:"",value:""}].concat()}),De={name:"",fields:[Object(u.a)({},Be)]},ze=function(e){var t=e.initialValues,c=void 0===t?De:t,n=e.controls,a=e.onSubmit;return Object(f.jsx)(A,{initialValues:c,onSubmit:a,children:function(e){e.values;var t=e.errors,c=t.fields&&t.fields.some((function(e){return Object.values(m(e)).some((function(e){return!!e}))}));return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(A.Item,{name:"name",label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u0445\u0435\u043c\u044b",className:"schema-name",schema:{type:"string",required:!0},children:Object(f.jsx)(J,{})}),Object(f.jsx)("div",{className:"divider"}),Object(f.jsxs)("div",{className:"schema-fields",children:[Object(f.jsx)("h2",{className:"heading-2",children:"\u0421\u0432\u043e\u0439\u0441\u0442\u0432\u0430 \u0441\u0445\u0435\u043c\u044b"}),Object(f.jsx)("p",{className:"schema-fields__subtitle",children:"\u0421\u0445\u0435\u043c\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u043d\u043e \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u043e"}),Object(f.jsx)(A.List,{name:"fields",children:function(e){var t=e.items,a=e.push,r=e.remove;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(He,{fields:t,removeField:r,className:"schema-fields__accordion"}),Object(f.jsxs)("div",{className:"schema-fields__controls",children:[Object(f.jsx)(v,{htmlType:"button",type:"secondary",disabled:c,onClick:function(){return a(Object(u.a)({},Be))},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0435 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u043e"}),n]})]})}})]})]})}})},Me={response:null,error:null,isLoading:!1},Ue=function(){var e=Object(n.useState)(Me),t=Object(o.a)(e,2),c=t[0],a=t[1];return[c,function(){var e=Object(Z.a)(Y.a.mark((function e(t){var c;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a((function(e){return Object(u.a)(Object(u.a)({},e),{},{isLoading:!0})})),e.next=3,h(500);case 3:c=Object(u.a)(Object(u.a)({},t),{},{id:Date.now()}),me(c),a({response:c,isLoading:!1,error:t?null:new Error("\u0421\u0445\u0435\u043c\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430")});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()]};var Ge=function(){var e=Object(l.g)(),t=Ue(),c=Object(o.a)(t,2),a=c[0],r=c[1];return Object(n.useEffect)((function(){a.response&&e.push("/schemas/".concat(a.response.id))}),[a]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(de,{}),Object(f.jsx)("div",{className:"content",children:Object(f.jsx)(ze,{onSubmit:r,controls:Object(f.jsx)(v,{disabled:a.isLoading,children:a.isLoading?"\u0421\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u043c...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0441\u0445\u0435\u043c\u0443"})})})]})},Ke={response:null,error:null,isLoading:!1},Qe=function(){var e=Object(n.useState)(Ke),t=Object(o.a)(e,2),c=t[0],a=t[1];return[c,function(){var e=Object(Z.a)(Y.a.mark((function e(t){var c,n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a((function(e){return Object(u.a)(Object(u.a)({},e),{},{isLoading:!0})})),e.next=3,h(500);case 3:c=be(),n=c.find((function(e){return e.id===t}))||null,a({response:n,isLoading:!1,error:n?null:new Error("\u0421\u0445\u0435\u043c\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430")});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()]},We=(c(86),c.p+"static/media/checkmark.50c9829f.svg"),Xe=(c(87),function(e){var t=e.label,c=e.checked,n=e.disabled,a=e.onCheck;return Object(f.jsxs)("div",{className:"checkbox-container",children:[Object(f.jsxs)("div",{className:b("checkbox",n&&"checkbox_disabled"),children:[Object(f.jsx)("input",{className:"checkbox__input",type:"checkbox",checked:c,disabled:n,onChange:function(e){return null===a||void 0===a?void 0:a(e.target.checked)}}),Object(f.jsx)("div",{className:"checkbox__control"}),Object(f.jsx)("img",{src:We,alt:"checkmark",className:"checkbox__checkmark"})]}),Object(f.jsx)(Ee,{disabled:n,children:t})]})});function Ye(e){return"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 ".concat(e.toLowerCase())}var Ze=function(e){var t=e.field;switch(t.type){case"string":return Object(f.jsx)(q,{name:t.key,label:t.label,schema:Object(u.a)({type:"string"},t.validation),children:Object(f.jsx)(J,{placeholder:Ye(t.label)})});case"password":return Object(f.jsx)(q,{name:t.key,label:t.label,schema:Object(u.a)({type:"string"},t.validation),children:Object(f.jsx)(D,{placeholder:Ye(t.label)})});case"phone":return Object(f.jsx)(q,{name:t.key,label:t.label,schema:Object(u.a)({type:"phone"},t.validation),children:Object(f.jsx)(J,{placeholder:Ye(t.label)})});case"number":return Object(f.jsx)(q,{name:t.key,label:t.label,schema:Object(u.a)({type:"number"},t.validation),children:Object(f.jsx)(Ie,{placeholder:Ye(t.label)})});case"select":return Object(f.jsx)(q,{name:t.key,label:t.label,schema:Object(u.a)({type:"select"},t.validation),valuePropName:"selected",trigger:"onSelect",children:Object(f.jsx)(Ne,{placeholder:Ye(t.label),options:t.options.map((function(e){return{label:e.value,value:e.key}}))})});case"checkbox":return Object(f.jsx)(q,{name:t.key,schema:Object(u.a)({type:"checkbox"},t.validation),valuePropName:"checked",trigger:"onCheck",children:Object(f.jsx)(Xe,{label:t.label})});default:return null}},$e=function(e){var t=e.schema,c=e.controls,n=e.onSubmit,a=e.onFail,r=t.fields,s=r.reduce((function(e,t){return e[t.key]=void 0,e}),{});return Object(f.jsx)(A,{initialValues:s,onSubmit:n,onFail:a,children:function(){return Object(f.jsxs)(f.Fragment,{children:[r.map((function(e){return Object(f.jsx)(Ze,{field:e},e.key)})),c]})}})},et=function(){var e=Qe(),t=Object(o.a)(e,2),c=t[0],a=t[1],r=Object(l.i)().params,s=R(!1),i=Object(o.a)(s,2),u=i[0],d=i[1],j=R(!1),b=Object(o.a)(j,2),m=b[0],h=b[1];Object(n.useEffect)((function(){a(+r.id)}),[]);var O=c.response;return Object(f.jsxs)("div",{className:"schema-page",children:[Object(f.jsx)(de,{}),Object(f.jsx)("div",{className:"content",children:Object(f.jsxs)("div",{className:"schema-page__container",children:[c.isLoading&&"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...",c.error&&Object(f.jsx)(ie,{type:"error",children:c.error.message}),O&&Object(f.jsxs)("div",{className:"schema-page-form",children:[Object(f.jsx)("h2",{className:"heading-2 schema-page-form__title",children:O.name}),Object(f.jsx)($e,{schema:O,onSubmit:function(){d.on(),h.off()},onFail:function(){h.on(),d.off()},controls:Object(f.jsx)(v,{className:"schema-page-form__controls",children:"\u0412\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f"})}),u&&Object(f.jsx)(ie,{className:"schema-page-form__alert",type:"success",children:"\u0412\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0439\u0434\u0435\u043d\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e!"}),m&&Object(f.jsx)(ie,{className:"schema-page-form__alert",type:"error",children:"\u0412\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f \u043d\u0435 \u043f\u0440\u043e\u0439\u0434\u0435\u043d\u0430."})]})]})})]})},tt=function(e){var t=e.children,c=Object(d.a)(e,["children"]),n=Q().token;return Object(f.jsx)(l.b,Object(u.a)(Object(u.a)({},c),{},{children:n?t:Object(f.jsx)(l.a,{to:"/"})}))};var ct=function(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsx)("div",{className:"container",children:Object(f.jsx)(W,{children:Object(f.jsx)(i.a,{children:Object(f.jsxs)(l.d,{children:[Object(f.jsx)(l.b,{exact:!0,path:"/",children:Object(f.jsx)(oe,{})}),Object(f.jsx)(tt,{exact:!0,path:"/schemas",children:Object(f.jsx)(fe,{})}),Object(f.jsx)(tt,{exact:!0,path:"/schemas/new",children:Object(f.jsx)(Ge,{})}),Object(f.jsx)(tt,{exact:!0,path:"/schemas/:id",children:Object(f.jsx)(et,{})})]})})})})})};s.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(ct,{})}),document.getElementById("root"))}},[[88,1,2]]]);
//# sourceMappingURL=main.80ccd745.chunk.js.map